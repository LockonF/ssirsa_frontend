//
  Created by lockonDaniel on 9/8/16.
md-card(flex='flex')
    md-card-content
        div(flex layout-xs='row')
            h2.md-display-2(flex) {{'Consumable_Catalog.title' | translate}}
            md-button.md-fab.md-primary.md-scale(hide-gt-xs ng-click='vm.cancel()')
                md-icon(md-font-icon='fa fa-plus', style='color:white;')
        div(flex='flex', layout-lt-md='column', layout-gt-md='row')
            div(flex='flex', layout='column', layout-align='space-around stretch')
                md-autocomplete(md-selected-item='vm.catalogo_insumo', md-selected-item-change='vm.selectedItemChange(vm.catalogo_insumo)', md-items='item in vm.search_items', md-item-text='item.descripcion', md-min-length='3', md-search-text-change='vm.lookup(vm.searchText)', md-search-text='vm.searchText', md-menu-class='autocomplete-custom-template', md-floating-label='{{"Consumable_Catalog.lookup" | translate}}')
                    md-item-template
                        span.item-title
                            md-icon(md-font-icon='zmdi zmdi-truck')
                            span {{item.descripcion}}
                md-virtual-repeat-container.vr-min-height(layout-fill hide-xs hide-sm)
                    md-list(flex='flex')
                        md-list-itm(flex='flex', ng-repeat='item in vm.catalogo_insumo_list')
                            md-button(ng-click='vm.clickRepeater(item)', ng-class="{'selected':item.id === vm.marca_cabinet.id}")
                                md-icon.avatar(md-svg-icon='assets/images/catalog.svg')
                                span {{item.descripcion}}
                            md-divider
            div(flex='flex', layout-align='start stretch', layout='column')
                md-button.md-fab.md-primary.md-scale.md-fab-top-right#cabecera(hide-xs ng-click='vm.cancel()')
                    md-icon(md-font-icon='fa fa-plus', style='color:white;')
                h3.md-display-1 {{'Consumable_Catalog.info' | translate}}
                form(name='inputForm')
                    md-input-container.md-block
                        label {{ 'Consumable_Catalog.quantity' | translate }}
                        input(type='number', name='cantidad', ng-model='vm.catalogo_insumo.cantidad', ng-required='true', min='0')
                        div(ng-messages='inputForm.cantidad.$error')
                            div(ng-message='min') {{'MAIN.GENERAL.MIN_NUMBER' | translate}} 0
                            div(ng-message='required') {{'MAIN.GENERAL.REQUIRED_FIELD' | translate}}
                    md-input-container.md-block
                        label {{ 'Consumable_Catalog.description' | translate }}
                        input(type='text', name='descripcion', ng-model='vm.catalogo_insumo.descripcion', ng-required='true')
                        div(ng-messages='inputForm.descripcion.$error')
                            div(ng-message='required') {{'MAIN.GENERAL.REQUIRED_FIELD' | translate}}
                    md-input-container.md-block
                        label {{ 'Consumable_Catalog.cost' | translate }}
                        input(type='number', name='costo', ng-model='vm.catalogo_insumo.costo', ng-required='true', min='0')
                        div(ng-messages='inputForm.costo.$error')
                            div(ng-message='required') {{'MAIN.GENERAL.REQUIRED_FIELD' | translate}}
                            div(ng-message='min') {{'MAIN.GENERAL.MIN_NUMBER' | translate}} 0
                    md-input-container.md-block
                        label {{ 'Consumable_Catalog.type' | translate }}
                        md-select(ng-model='vm.catalogo_insumo.tipo', ng-required='true')
                            md-option(ng-repeat='tipo in vm.tipos', ng-value='tipo.value') {{tipo.display}}
                    md-input-container.md-block
                        label {{ 'Consumable_Catalog.keyword' | translate }}
                        input(type='text', name='palabra_clave', ng-model='vm.catalogo_insumo.palabra_clave', ng-required='true')
                        div(ng-messages='inputForm.palabra_clave.$error')
                            div(ng-message='required') {{'MAIN.GENERAL.REQUIRED_FIELD' | translate}}
                    md-input-container.md-block
                        label {{ 'Consumable_Catalog.zone' | translate }}
                        md-select(ng-model='vm.catalogo_insumo.zona', ng-required='true')
                            md-option(ng-repeat='zona in vm.zonas', ng-value='zona.value') {{zona.display}}
                    md-input-container.md-block
                        label {{ 'Consumable_Catalog.category' | translate }}
                        md-select(ng-model='vm.catalogo_insumo.categoria', ng-required='true')
                            md-option(ng-repeat='categoria in vm.categoria_list', ng-value='categoria.id') {{categoria.nombre}}
                    md-input-container.md-block
                        label {{ 'Consumable_Catalog.provider' | translate }}
                        md-select(ng-model='vm.catalogo_insumo.proveedor', ng-required='true')
                            md-option(ng-repeat='proveedor in vm.proveedor_list', ng-value='proveedor.id') {{proveedor.razon_social}}
                div(flex layout='row', layout-align='end end')
                    md-button.md-raised.md-primary(ng-if='vm.catalogo_insumo.id!=null && vm.catalogo_insumo.id!=undefined', ng-disabled='inputForm.$invalid', ng-click='vm.update()')
                        md-icon(md-font-icon='fa fa-pencil')
                    md-button.md-raised.md-primary(ng-if='vm.catalogo_insumo.id==null || vm.catalogo_insumo.id==undefined', ng-disabled='inputForm.$invalid', ng-click='vm.create()')
                        md-icon(md-font-icon='fa fa-save')
                    md-button.md-raised.md-warn(ng-if='vm.catalogo_insumo.id!=null && vm.catalogo_insumo.id!=undefined', ng-click='vm.remove()')
                        md-icon(md-font-icon="fa fa-trash")